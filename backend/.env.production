# =================================
# PRODUCTION ENVIRONMENT
# =================================
# CRITICAL: Replace ALL placeholder values before deployment!
# Use strong, unique passwords and secrets

# =================================
# APPLICATION
# =================================
NODE_ENV=production
PORT=3000
API_PREFIX=api
API_VERSION=v1

# =================================
# DATABASE - Production
# =================================
DATABASE_HOST=<YOUR_PRODUCTION_DB_HOST>  # e.g., db.medical.com or RDS endpoint
DATABASE_PORT=5432
DATABASE_USERNAME=prod_user
DATABASE_PASSWORD=<GENERATE_STRONG_PASSWORD_HERE>  # Use: openssl rand -base64 32
DATABASE_NAME=prod_db
DATABASE_SSL=true
DATABASE_SSL_REJECT_UNAUTHORIZED=false     # Set to true if using custom CA
DATABASE_SYNCHRONIZE=false                 # NEVER true in production!
DATABASE_LOGGING=error                     # Only log errors
DATABASE_POOL_SIZE=20                      # Adjust based on load
DATABASE_CONNECTION_TIMEOUT=5000           # 5 seconds
DATABASE_IDLE_TIMEOUT=10000               # 10 seconds
DATABASE_STATEMENT_TIMEOUT=30000          # 30 seconds max query time

# =================================
# JWT CONFIGURATION
# =================================
# Generate with: openssl rand -hex 64
JWT_ACCESS_SECRET=<GENERATE_64_CHAR_HEX_HERE>
JWT_REFRESH_SECRET=<GENERATE_64_CHAR_HEX_HERE>
JWT_ACCESS_EXPIRATION=15m                 # Short for security
JWT_REFRESH_EXPIRATION=7d                 # Reasonable refresh window

# =================================
# SECURITY
# =================================
BCRYPT_ROUNDS=12                          # Strong hashing for production
SESSION_SECRET=<GENERATE_STRONG_SECRET>   # openssl rand -base64 32
COOKIE_SECRET=<GENERATE_STRONG_SECRET>    # openssl rand -base64 32
COOKIE_SECURE=true                        # HTTPS only
COOKIE_HTTPONLY=true                      # Prevent XSS
COOKIE_SAMESITE=strict                    # CSRF protection

# =================================
# RATE LIMITING
# =================================
RATE_LIMIT_TTL=60                         # Time window in seconds
RATE_LIMIT_LIMIT=10                       # Max requests per window (strict)
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# =================================
# CORS
# =================================
CORS_ORIGIN=https://app.allodoc.com       # Your production frontend URL
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400                        # 24 hours

# =================================
# PRODUCTION ADMIN USER
# =================================
# Only used for initial setup, change immediately after first login
SEED_ADMIN_EMAIL=admin@allodoc.com
SEED_ADMIN_PASSWORD=<GENERATE_TEMP_PASSWORD>  # Change on first login!
SEED_ADMIN_FIRST_NAME=System
SEED_ADMIN_LAST_NAME=Administrator

# =================================
# LOGGING
# =================================
LOG_LEVEL=warn                            # warn, error in production
LOG_FORMAT=json                           # Structured logging for production
LOG_FILE_PATH=/var/log/allodoc/app.log   # Log file location
LOG_MAX_SIZE=100M                         # Max log file size
LOG_MAX_FILES=14d                         # Keep logs for 14 days

# =================================
# MONITORING & ALERTS
# =================================
SENTRY_DSN=<YOUR_SENTRY_DSN>             # Error tracking
NEW_RELIC_LICENSE_KEY=<YOUR_KEY>         # APM monitoring (optional)
SLACK_WEBHOOK_URL=<YOUR_WEBHOOK>         # Alert notifications (optional)

# =================================
# FEATURES FLAGS
# =================================
ENABLE_SWAGGER=false                      # Disable in production
ENABLE_GRAPHQL_PLAYGROUND=false          # Security risk in production
ENABLE_DEBUG_MODE=false                  # Never in production

# =================================
# BACKUP CONFIGURATION
# =================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"              # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=<YOUR_BACKUP_BUCKET>    # For cloud backup
BACKUP_S3_REGION=<YOUR_AWS_REGION>

# =================================
# EMAIL SERVICE (Optional)
# =================================
SMTP_HOST=<YOUR_SMTP_HOST>
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=<YOUR_SMTP_USER>
SMTP_PASSWORD=<YOUR_SMTP_PASSWORD>
EMAIL_FROM=noreply@allodoc.com

# =================================
# REDIS CACHE (Optional but recommended)
# =================================
REDIS_HOST=<YOUR_REDIS_HOST>
REDIS_PORT=6379
REDIS_PASSWORD=<YOUR_REDIS_PASSWORD>
REDIS_DB=0
REDIS_TTL=3600                           # 1 hour cache