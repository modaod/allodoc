<h2 mat-dialog-title>{{ data.mode === 'create' ? 'Create New Organization' : 'Edit Organization' }}</h2>

<form [formGroup]="organizationForm" (ngSubmit)="onSubmit()">
  <mat-dialog-content>
    <div class="form-container">
      <!-- Organization Name -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Organization Name</mat-label>
        <input matInput formControlName="name" placeholder="Enter organization name">
        <mat-error *ngIf="organizationForm.get('name')?.hasError('required')">
          Name is required
        </mat-error>
        <mat-error *ngIf="organizationForm.get('name')?.hasError('minlength')">
          Name must be at least 2 characters
        </mat-error>
      </mat-form-field>

      <!-- Organization Type -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Organization Type</mat-label>
        <mat-select formControlName="type">
          <mat-option value="CLINIC">Clinic</mat-option>
          <mat-option value="HOSPITAL">Hospital</mat-option>
          <mat-option value="MEDICAL_CENTER">Medical Center</mat-option>
        </mat-select>
        <mat-error *ngIf="organizationForm.get('type')?.hasError('required')">
          Type is required
        </mat-error>
      </mat-form-field>

      <!-- Address -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Address</mat-label>
        <textarea matInput formControlName="address" rows="2" placeholder="Enter full address"></textarea>
        <mat-error *ngIf="organizationForm.get('address')?.hasError('required')">
          Address is required
        </mat-error>
        <mat-error *ngIf="organizationForm.get('address')?.hasError('minlength')">
          Address must be at least 10 characters
        </mat-error>
      </mat-form-field>

      <!-- Phone and Email Row -->
      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Phone</mat-label>
          <input matInput formControlName="phone" placeholder="Enter phone number">
          <mat-icon matPrefix>phone</mat-icon>
          <mat-error *ngIf="organizationForm.get('phone')?.hasError('minlength')">
            Phone must be at least 8 characters
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" placeholder="Enter email address">
          <mat-icon matPrefix>email</mat-icon>
          <mat-error *ngIf="organizationForm.get('email')?.hasError('email')">
            Invalid email format
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Registration Number -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Registration Number</mat-label>
        <input matInput formControlName="registrationNumber" placeholder="Enter registration number (optional)">
        <mat-icon matPrefix>badge</mat-icon>
      </mat-form-field>

      <!-- Description -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Description</mat-label>
        <textarea matInput formControlName="description" rows="3" placeholder="Enter description (optional)"></textarea>
      </mat-form-field>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button type="button" (click)="onCancel()">Cancel</button>
    <button mat-raised-button color="primary" type="submit" [disabled]="!organizationForm.valid || loading">
      <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
      <span *ngIf="!loading">{{ data.mode === 'create' ? 'Create' : 'Update' }}</span>
    </button>
  </mat-dialog-actions>
</form>